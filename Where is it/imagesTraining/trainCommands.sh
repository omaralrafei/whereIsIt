#!/bin/sh
gnome-terminal -- bash -c "/home/omar/Downloads/darknet/darknet detector train /home/omar/Downloads/darknet/custom_cfg/custom.data /home/omar/Downloads/darknet/custom_cfg/yolov3-tiny_3l.cfg /home/omar/Downloads/imagesTraining/public/yolov3-tiny_best.weights -map -clear && cp /home/omar/Downloads/darknet/custom_cfg/custom.names public/newTraining/labels.txt && cp /home/omar/Downloads/darknet/custom_cfg/custom.names public/labels.txt && cp /home/omar/Downloads/darknet/custom_cfg/yolov3-tiny.cfg public/newTraining/yolov3-tiny.cfg && cp /home/omar/Downloads/darknet/custom_cfg/yolov3-tiny.cfg public/yolov3-tiny.cfg && cp /home/omar/Downloads/darknet/backup/yolov3-tiny_best.weights public/yolov3-tiny_best.weights  && cp /home/omar/Downloads/darknet/backup/yolov3-tiny_best.weights public/newTraining/yolov3-tiny_best.weights && rm /home/omar/Downloads/darknet/backup/yolov3-tiny_best.weights && echo $'[net]\n# Testing\n batch=1\n subdivisions=1\n# Training\n#batch=64\n#subdivisions=4\nwidth=416\nheight=416\nchannels=3\nmomentum=0.9\ndecay=0.0005\nangle=0\nsaturation = 1.5\nexposure = 1.5\nhue=.1\n\nlearning_rate=0.001\nburn_in=1000\nmax_batches = $1\npolicy=steps\nsteps=$4,$5\nscales=.1,.1\n\n\n[convolutional]\nbatch_normalize=1\nfilters=16\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[maxpool]\nsize=2\nstride=2\n\n[convolutional]\nbatch_normalize=1\nfilters=32\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[maxpool]\nsize=2\nstride=2\n\n[convolutional]\nbatch_normalize=1\nfilters=64\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[maxpool]\nsize=2\nstride=2\n\n[convolutional]\nbatch_normalize=1\nfilters=128\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[maxpool]\nsize=2\nstride=2\n\n[convolutional]\nbatch_normalize=1\nfilters=256\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[maxpool]\nsize=2\nstride=2\n\n[convolutional]\nbatch_normalize=1\nfilters=512\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[maxpool]\nsize=2\nstride=1\n\n[convolutional]\nbatch_normalize=1\nfilters=1024\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n###########\n\n[convolutional]\nbatch_normalize=1\nfilters=256\nsize=1\nstride=1\npad=1\nactivation=leaky\n\n[convolutional]\nbatch_normalize=1\nfilters=512\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[convolutional]\nsize=1\nstride=1\npad=1\nfilters=$3\nactivation=linear\n\n\n\n[yolo]\nmask = 6,7,8\nanchors = 4,7, 7,15, 13,25,   25,42, 41,67, 75,94,   91,162, 158,205, 250,332\nclasses=$2\nnum=9\njitter=.3\nignore_thresh = .7\ntruth_thresh = 1\nrandom=1\n\n[route]\nlayers = -4\n\n[convolutional]\nbatch_normalize=1\nfilters=128\nsize=1\nstride=1\npad=1\nactivation=leaky\n\n[upsample]\nstride=2\n\n[route]\nlayers = -1, 8\n\n[convolutional]\nbatch_normalize=1\nfilters=256\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[convolutional]\nsize=1\nstride=1\npad=1\nfilters=$3\nactivation=linear\n\n[yolo]\nmask = 3,4,5\nanchors = 4,7, 7,15, 13,25,   25,42, 41,67, 75,94,   91,162, 158,205, 250,332\nclasses=$2\nnum=9\njitter=.3\nignore_thresh = .7\ntruth_thresh = 1\nrandom=1\n\n\n\n[route]\nlayers = -3\n\n[convolutional]\nbatch_normalize=1\nfilters=128\nsize=1\nstride=1\npad=1\nactivation=leaky\n\n[upsample]\nstride=2\n\n[route]\nlayers = -1, 6\n\n[convolutional]\nbatch_normalize=1\nfilters=128\nsize=3\nstride=1\npad=1\nactivation=leaky\n\n[convolutional]\nsize=1\nstride=1\npad=1\nfilters=$3\nactivation=linear\n\n[yolo]\nmask = 0,1,2\nanchors = 4,7, 7,15, 13,25,   25,42, 41,67, 75,94,   91,162, 158,205, 250,332\nclasses=$2\nnum=9\njitter=.3\nignore_thresh = .7\ntruth_thresh = 1\nrandom=1' > public/yolov3-tiny.cfg"
